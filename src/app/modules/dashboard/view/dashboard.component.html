<ion-content fullscreen>
  <ion-grid *ngIf="!isDashboardServerError" class="pb-5">
    <ion-row>
      <ion-col size="12">
        <ion-row>
          <ion-col size="12" class="p-0">
            <ion-row
              class="flex-column flex-column-reverse flex-lg-row align-items-center"
            >
              <ion-col
                size="12"
                size-lg="6"
                class="d-flex align-items-center justify-content-between"
              >
                <h6 class="ion-no-margin text-white fs-2 fw-bold">
                  {{ dictionary.BusinessDashboard }}
                </h6>
              </ion-col>
              <ion-col size="12" size-lg="6" class="px-0">
                <ion-row>
                  <ion-col
                    size="12"
                    size-lg="6"
                    class="d-flex align-items-center gap-2"
                  >
                    <app-currency-combobox
                      class="w-100"
                      name="currencyId"
                      [(ngModel)]="currencyId"
                      (selectionChange)="changeCurrency($event)"
                    />
                  </ion-col>
                  <ion-col size="12" size-lg="6">
                    <app-combobox
                      name="dateTime"
                      [Label]="
                        !!getPlaceHolderTime()
                          ? getPlaceHolderTime()
                          : dictionary.DateRange
                      "
                      [data]="dateTimeCmbData"
                      [filterable]="false"
                      [valueField]="'value'"
                      [textField]="'name'"
                      [(ngModel)]="dateTime"
                      (selectionChange)="dateTimeSelectionChange()"
                      [hasClear]="false"
                      class="w-100"
                    />
                  </ion-col>
                </ion-row>
              </ion-col>
            </ion-row>
            <hr class="ion-no-margin mt-2" />
          </ion-col>
          <ion-col size="12" class="p-0">
            <ion-row>
              <ion-col *ngIf="CustomersDebt" size="12" size-sm="3" class="p-0">
                <ion-card class="p-2 m-0 m-sm-2 mt-2">
                  <div class="p-2 rounded-2 card-box">
                    <div class="d-flex justify-content-between w-100">
                      <span class="text-white fs-6">
                        {{ dictionary.Profit }}
                        <span class="currency">
                          ({{ currency.currencyName }})
                        </span>
                      </span>
                    </div>
                    <div class="d-flex justify-content-center w-100">
                      <span class="text-white fs__2rem">
                        {{ profit | truncateDecimalsPipe : 0 }}
                      </span>
                    </div>
                  </div>
                </ion-card>
              </ion-col>
              <ion-col *ngIf="CustomersDebt" size="12" size-sm="3" class="p-0">
                <ion-card class="p-2 m-0 m-sm-2 mt-2">
                  <div class="p-2 rounded-2 card-box">
                    <div class="d-flex justify-content-between w-100">
                      <span class="text-white fs-6">
                        {{ dictionary.Sale }}
                        <span class="currency">
                          ({{ currency.currencyName }})
                        </span>
                      </span>
                    </div>
                    <div class="d-flex justify-content-center w-100">
                      <span class="text-white fs__2rem">
                        {{ sale | truncateDecimalsPipe : 0 }}
                      </span>
                    </div>
                  </div>
                </ion-card>
              </ion-col>
              <ion-col *ngIf="CustomersDebt" size="12" size-sm="6" class="p-0">
                <ion-card class="p-2 m-0 m-sm-2 mt-2">
                  <div class="p-2 rounded-2 card-box">
                    <div class="d-flex justify-content-between w-100">
                      <span class="text-white">
                        {{ dictionary.CustomersDebt }} - ({{
                          dictionary.TimeLess
                        }})
                        <span class="currency">
                          ({{ currency.currencyName }})
                        </span>
                      </span>
                    </div>
                    <div class="d-flex justify-content-center w-100">
                      <span class="text-white fs__2rem">
                        {{ CustomersDebt.amount | truncateDecimalsPipe : 0 }}
                      </span>
                    </div>
                  </div>
                </ion-card>
              </ion-col>
            </ion-row>
          </ion-col>
          <ion-col *ngIf="profitChartData.length > 0" size="12" size-sm="6">
            <ion-card class="ion-no-margin p-4 rounded-2 highcharts-section">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="ion-no-margin text-white fs-4">
                  {{ dictionary.Profit }}
                </h6>
              </div>
              <div class="row pt-2 section align-items-center">
                <highcharts-chart
                  [Highcharts]="highcharts"
                  [options]="profitChartOptions"
                  [oneToOne]="true"
                  class="col-12 p-0"
                >
                </highcharts-chart>
              </div>
            </ion-card>
          </ion-col>
          <ion-col *ngIf="saleChartData.length > 0" size="12" size-sm="6">
            <ion-card class="ion-no-margin p-4 rounded-2 highcharts-section">
              <div class="d-flex justify-content-between align-items-center">
                <h6 class="ion-no-margin text-white fs-4">
                  {{ dictionary.Sale }}
                </h6>
              </div>
              <div class="row pt-2 section align-items-center">
                <highcharts-chart
                  [Highcharts]="highcharts"
                  [options]="saleChartOptions"
                  [oneToOne]="true"
                  class="col-12 p-0"
                >
                </highcharts-chart>
              </div>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-col>
      <ion-col size="12">
        <ion-row>
          <ion-col size="12" size-sm="6">
            <ion-row>
              <ion-col size="12">
                <div>
                  <h6 class="ion-no-margin text-white fs-2 fw-bold">
                    {{ dictionary.Customers }}
                    <span class="currency">
                      ({{ currency.currencyName }})
                    </span>
                  </h6>
                </div>
                <hr class="ion-no-margin mt-2" />
              </ion-col>
              <ion-col size="12">
                <app-customer-grid [data]="customers" />
              </ion-col>
            </ion-row>
          </ion-col>
          <ion-col size="12" size-sm="6">
            <ion-row>
              <ion-col size="12">
                <div>
                  <h6 class="ion-no-margin text-white fs-2 fw-bold">
                    {{ dictionary.SaleManagers }}
                    <span class="currency">
                      ({{ currency.currencyName }})
                    </span>
                  </h6>
                </div>
                <hr class="ion-no-margin mt-2" />
              </ion-col>
              <ion-col size="12">
                <app-sale-manager-grid [data]="saleManagers" />
              </ion-col>
            </ion-row>
          </ion-col>
          <ion-col size="12" size-sm="6">
            <ion-row>
              <ion-col size="12">
                <div>
                  <h6 class="ion-no-margin text-white fs-2 fw-bold">
                    {{ dictionary.Offices }}
                    <span class="currency">
                      ({{ currency.currencyName }})
                    </span>
                  </h6>
                </div>
                <hr class="ion-no-margin mt-2" />
              </ion-col>
              <ion-col size="12">
                <app-offices-grid [data]="offices" />
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
      </ion-col>
    </ion-row>
  </ion-grid>
  <div *ngIf="isDashboardServerError" class="page__is__not__available">
    <ion-label> {{ dictionary.PageIsNotAvailable }} </ion-label>
  </div>
</ion-content>
