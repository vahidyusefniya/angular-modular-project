<ion-content [fullscreen]="true" class="ion-no-padding">
  <form #createCustomerForm="ngForm">
    <ion-card class="ion-no-padding ion-no-margin mt-1">
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <div class="d-flex justify-content-between align-items-center">
              <span class="fs-2">{{ dictionary.NewCustomer }}</span>
              <ion-button
                color="primary"
                class="d-none d-sm-block m-0"
                [disabled]="!createCustomerForm.form.valid"
                (click)="onClickSave()"
              >
                {{ dictionary.Save }}
              </ion-button>
            </div>
            <hr class="m-0" />
          </ion-col>
          <ion-col size="12" class="mt-3">
            <ion-label class="fs-6">{{ dictionary.PersonalInfo }}</ion-label>
            <hr class="divider my-0" />
          </ion-col>
          <ion-col size="12" sizeLg="6">
            <ion-input
              labelPlacement="floating"
              fill="outline"
              [label]="dictionary.Name"
              [(ngModel)]="customer.merchantName"
              name="MerchantName"
              [required]="true"
              mode="md"
              id="MerchantName"
              #merchantNameInput
              (keydown.enter)="
                createCustomerForm.form.valid ? onClickSave() : ''
              "
            />
          </ion-col>
          <ion-col size="12" sizeLg="6">
            <app-text
              id="email"
              [Label]="dictionary.Email"
              [(ngModel)]="customer.email"
              name="email"
              [required]="true"
              [email]="true"
            />
          </ion-col>
          <ion-col size="12">
            <app-mobile
              (keydown.enter)="
                createCustomerForm.form.valid ? onClickSave() : ''
              "
              [Label]="dictionary.PhoneNumber"
              [required]="true"
              name="phoneNumber"
              id="phoneNumber"
              (inputChange)="phoneNumberChange($event)"
            />
          </ion-col>
          <ion-col size="12">
            <app-mobile
              (keydown.enter)="
                createCustomerForm.form.valid ? onClickSave() : ''
              "
              [Label]="dictionary.WhatsappNumber"
              [required]="true"
              name="whatsappNumber"
              id="whatsappNumber"
              (inputChange)="whatsappNumberChange($event)"
            />
          </ion-col>
          <ion-col size="12" sizeLg="9">
            <app-text
              [Label]="dictionary.Website"
              name="website"
              id="website"
              (keydown.enter)="
                createCustomerForm.form.valid ? onClickSave() : ''
              "
              [(ngModel)]="customer.website"
            />
          </ion-col>
          <ion-col size="12" sizeLg="3">
            <app-text
              id="timezone"
              [Label]="dictionary.TimeZone"
              name="timezone"
              [readonly]="true"
              (click)="showTimezoneModal = true"
              [(ngModel)]="timezoneName"
              [required]="true"
            />
          </ion-col>

          <ion-col size="12" class="mt-3">
            <ion-label class="fs-6">{{ dictionary.Address }}</ion-label>
            <hr class="divider my-0" />
          </ion-col>
          <ion-col size="12" sizeLg="3">
            <app-text
              id="country"
              [Label]="dictionary.Country"
              name="country"
              [readonly]="true"
              (click)="showCountryModal = true"
              [(ngModel)]="countryName"
              [required]="true"
            />
          </ion-col>
          <ion-col size="12" sizeLg="3">
            <app-text
              id="state"
              [Label]="dictionary.StateProvinceTerritory"
              name="state"
              [readonly]="true"
              (click)="countryName !== '' && (showStateModal = true)"
              [(ngModel)]="stateName"
              [disabled]="countryName === ''"
              [required]="true"
            />
          </ion-col>
          <ion-col size="12" sizeLg="3">
            <app-text
              id="city"
              [Label]="dictionary.City"
              name="city"
              [readonly]="true"
              [disabled]="
                countryName === '' || stateName === '' || stateName === 'Other'
              "
              (click)="
                countryName !== '' &&
                  stateName !== '' &&
                  stateName !== 'Other' &&
                  (showCityModal = true)
              "
              [(ngModel)]="cityName"
              [required]="true"
            />
          </ion-col>
          <ion-col size="12" sizeLg="3">
            <app-text
              id="postalCode"
              [Label]="dictionary.ZIPPostalCode"
              name="postalCode"
              [(ngModel)]="addressObj.postalCode"
              [required]="true"
            />
          </ion-col>
          <ion-col size="12">
            <app-text
              [Label]="dictionary.Address"
              name="address"
              id="address"
              (keydown.enter)="
                createCustomerForm.form.valid ? onClickSave() : ''
              "
              [(ngModel)]="addressObj.rawAddress"
              [required]="true"
            />
          </ion-col>

          <ion-col size="12" class="mt-3">
            <ion-label class="fs-6">{{ dictionary.Credential }}</ion-label>
            <hr class="divider my-0" />
          </ion-col>
          <ion-col size="12">
            <app-combobox
              [Label]="dictionary.PriceList"
              name="priceListId"
              id="priceListId"
              [(ngModel)]="customer.priceListId"
              [data]="priceLists"
              [textField]="'priceListName'"
              [valueField]="'priceListId'"
              [required]="true"
            />
          </ion-col>
          <ion-col *ngIf="gatewayLists.length > 0" size="12">
            <app-combobox
              [Label]="dictionary.GateWayList"
              name="gatewayListId"
              id="gatewayListId"
              [(ngModel)]="customer.gatewayListId"
              [data]="gatewayLists"
              [textField]="'name'"
              [valueField]="'gatewayListId'"
            />
          </ion-col>
          <ion-col *ngIf="saleManagers.length > 0" size="12">
            <app-combobox
              [Label]="dictionary.SaleManager"
              name="saleManagerId"
              id="saleManagerId"
              [(ngModel)]="customer.saleManagerId"
              [data]="saleManagers"
              [textField]="'name'"
              [valueField]="'saleManagerId'"
            />
          </ion-col>
          <ion-col size="12">
            <ion-button
              color="primary"
              class="d-sm-none w-100"
              [disabled]="!createCustomerForm.form.valid"
              (click)="onClickSave()"
            >
              {{ dictionary.Save }}
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card>
  </form>
</ion-content>

<app-radio-list
  [isOpen]="showCountryModal"
  *ngIf="showCountryModal"
  (dismiss)="showCountryModal = false"
  [data]="countries"
  [title]="dictionary.SelectCountry"
  (select)="selectCountry($event)"
  [selectedObject]="country"
/>

<app-radio-list
  [isOpen]="showStateModal"
  *ngIf="showStateModal"
  (dismiss)="showStateModal = false"
  [data]="states"
  [title]="dictionary.SelectStateProvinceTerritory"
  (select)="selectState($event)"
  [selectedObject]="state"
/>

<app-radio-list
  [isOpen]="showCityModal"
  *ngIf="showCityModal"
  (dismiss)="showCityModal = false"
  [data]="cities"
  [title]="dictionary.SelectCity"
  (select)="selectCity($event)"
  [selectedObject]="city"
/>

<app-timezones
  [isOpen]="showTimezoneModal"
  *ngIf="showTimezoneModal"
  (dismiss)="showTimezoneModal = false"
  [data]="timezones"
  [title]="dictionary.SelectTimezone"
  (select)="selectTimezone($event)"
  [selectedObject]="timezone"
/>
